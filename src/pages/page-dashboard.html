<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-auth.html">
<link rel="import" href="../shared-styles.html">

<dom-module id="page-dashboard">
  <template>
    <style include="shared-styles">
      :host {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }
    </style>

    <firebase-auth id="auth" user="{{user}}"></firebase-auth>

    <div>
      Dashboard
    </div>

  </template>

  <script>
    class PageDashboard extends Polymer.Element {
      static get is() {
        return 'page-dashboard';
      }

      static get properties() {
        return {
          user: {
            type: Object,
            default: null,
            reflectToAttribute: true
          }
        };
      }

      connectedCallback() {
        super.connectedCallback();
        if (!this.user) {
          this.dispatchEvent(new CustomEvent('require-toast', {
            bubbles: true,
            composed: true,
            detail: {
              toastConfigs: {
                text: 'You need to login to access ths page !',
                horizontalAlign: 'right',
                duration: 0,
                noCancelOnOutsideClick: false
              }
            }
          }));
        }
      }

      _redirectToLoginPage() {
        window.location = 'login';
      }
    }

    window.customElements.define(PageDashboard.is, PageDashboard);
  </script>
</dom-module>