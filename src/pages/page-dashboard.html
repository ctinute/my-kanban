<link rel="import" href="./../../bower_components/polymer/polymer-element.html">
<link rel="import" href="./../../bower_components/polymerfire/firebase-auth.html">
<link rel="import" href="./../../bower_components/paper-button/paper-button.html">

<link rel="import" href="./../shared-styles.html">
<link rel="import" href="./modules/project-init-dialog.html">

<dom-module id="page-dashboard">
  <template>
    <style include="shared-styles">
      :host {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        box-sizing: border-box;
        padding: 0 16px;
      }

      .page-title {
        margin: 16px 0;
        height: 32px;
        line-height: 32px;
      }

      .section-action paper-button {
        text-decoration: underline;
      }
    </style>

    <h2 class="page-title">Dashboard</h2>

    <div class="page-content">
      
      <div class="section projects">
        <h3 class="section-title">
          Projects
        </h3>
        <div class="section-content">
          <template is="dom-if" if="[[!(projects.length)]]">
            You don't have any project yet.<br/>
            Press button bellow to create new one.
          </template>
          <template 
            is="dom-repeate"
            items="[[projects]]"
            as="project">
            <a href="project.link">
              [[project.name]]
            </a>
          </template>
        </div>
        <div class="section-action">
          <paper-button ripple on-click="_openProjectInitDialog">New project...</paper-button>
        </div>
      </div>

    </div>
    
    
    

  </template>

  <script>
    class PageDashboard extends Polymer.Element {
      static get is() {
        return 'page-dashboard';
      }

      static get properties() {
        return {
          projects: {
            type: Array,
            value: []
          }
        };
      }

      _openProjectInitDialog() {
        this.dispatchEvent(new CustomEvent('require-dialog', {
          bubbles: true,
          composed: true,
          detail: {
            modalId: 'project-init-dialog'
          }
        }));
      }

    }

    window.customElements.define(PageDashboard.is, PageDashboard);
  </script>
</dom-module>